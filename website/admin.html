<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cab Booking System</title>

    <style>
        body { font-family: Arial; background:#f5f5f5; padding:20px; }
        .container { max-width: 600px; margin:auto; background:white; padding:20px; border-radius:10px; }
        input, button { width:100%; padding:10px; margin:8px 0; }

        #adminPanel, #driver-dashboard { 
            display:none;
            margin-top:30px;
            padding:20px;
            background:#222;
            color:white;
            border-radius:10px;
        }
        #bookingList, #driver-booking-list { 
            background:white; 
            color:black; 
            padding:10px; 
            border-radius:10px; 
        }
        .booking-item { border-bottom:1px solid #ccc; padding:10px 0; }
    </style>
</head>
<body>

    

    <!-- DRIVER LOGIN -->
    <div class="container">
        <h3>Driver Login</h3>
        <input type="text" id="driver-username" placeholder="Username" />
        <input type="password" id="driver-password" placeholder="Password" />
        <button onclick="driverLogin()">Login</button>
    </div>

    <!-- ADMIN PANEL -->
    <div id="adminPanel">
        <h2>Admin Panel - All Bookings</h2>
        <div id="bookingList"></div>
    </div>

    <!-- DRIVER DASHBOARD -->
    <div id="driver-dashboard">
        <h2>Driver Dashboard</h2>
        <p>All Bookings</p>
        <div id="driver-booking-list"></div>
        <button onclick="logoutDriver()" style="margin-top:10px;">Logout</button>
    </div>


<script>
// ------------------------------------------------
// SAVE BOOKING TO LOCAL STORAGE
// ------------------------------------------------
function submitBooking() {
    let booking = {
        name: document.getElementById("name").value,
        phone: document.getElementById("phone").value,
        pickup: document.getElementById("pickup").value,
        drop: document.getElementById("drop").value,
        date: document.getElementById("date").value
    };

    let list = JSON.parse(localStorage.getItem("cab_bookings")) || [];
    list.push(booking);

    localStorage.setItem("cab_bookings", JSON.stringify(list));

    document.getElementById("msg").innerText = "Booking Submitted Successfully!";
}

// ------------------------------------------------
// ADMIN LOGIN
// ------------------------------------------------
function loginAdmin() {
    let pass = document.getElementById("adminPass").value;

    if(pass === "admin123"){
        document.getElementById("adminPanel").style.display = 'block';
        displayBookings();
    } else {
        alert("Wrong Password!");
    }
}

// ------------------------------------------------
// DISPLAY BOOKINGS (ADMIN)
// ------------------------------------------------
function displayBookings() {
    let bookings = JSON.parse(localStorage.getItem("cab_bookings")) || [];
    let output = "";

    bookings.forEach((b, i) => {
        output += `
            <div class='booking-item'>
                <strong>Booking ${i+1}</strong><br>
                Name: ${b.name}<br>
                Phone: ${b.phone}<br>
                Pickup: ${b.pickup}<br>
                Drop: ${b.drop}<br>
                Date: ${b.date}<br>
            </div>
        `;
    });

    document.getElementById("bookingList").innerHTML = output;
}

// ------------------------------------------------
// DRIVER LOGIN
// ------------------------------------------------
function driverLogin() {
    const user = document.getElementById('driver-username').value;
    const pass = document.getElementById('driver-password').value;

    if (user === "driver" && pass === "1234") {
        document.getElementById("driver-dashboard").style.display = "block";
        loadDriverBookings();
    } else {
        alert("Invalid Driver Login!");
    }
}

// ------------------------------------------------
// LOAD BOOKINGS FOR DRIVER
// ------------------------------------------------
function loadDriverBookings() {
    const bookings = JSON.parse(localStorage.getItem("cab_bookings")) || [];
    const list = document.getElementById("driver-booking-list");

    list.innerHTML = "";

    bookings.forEach((b, index) => {
        list.innerHTML += `
        <div class='booking-item' style="background:white; padding:10px; border-radius:10px;">
            <p><strong>Name:</strong> ${b.name}</p>
            <p><strong>Pickup:</strong> ${b.pickup}</p>
            <p><strong>Drop:</strong> ${b.drop}</p>
            <p><strong>Date:</strong> ${b.date}</p>
        </div>`;
    });
}

// ------------------------------------------------
// DRIVER LOGOUT
// ------------------------------------------------
function logoutDriver() {
    document.getElementById("driver-dashboard").style.display = "none";
}
</script>

</body>
</html>
